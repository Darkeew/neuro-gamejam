[gd_scene load_steps=26 format=3 uid="uid://d0vo28sl5gwxi"]

[ext_resource type="Script" path="res://scripts/rooms/bedroom.gd" id="1_22h2h"]
[ext_resource type="Texture2D" uid="uid://coum05tampunl" path="res://assets/rooms/First_Room-0005.png" id="1_njdfq"]
[ext_resource type="Texture2D" uid="uid://xuyu2o3n4x7e" path="res://assets/rooms/bedroom/Bed-0001.png" id="2_iouxf"]
[ext_resource type="Texture2D" uid="uid://djws22iw7t47i" path="res://assets/rooms/bedroom/Book_case-0001.png" id="3_j433k"]
[ext_resource type="PackedScene" uid="uid://ca1gfedaepukb" path="res://scripts/character/AccurateShadows.tscn" id="3_pmjfu"]
[ext_resource type="PackedScene" uid="uid://v22c1pxub37n" path="res://scenes/puzzles/safe.tscn" id="4_7o0in"]
[ext_resource type="PackedScene" uid="uid://bjifi78fl6xtd" path="res://scenes/rooms/room_transition_region.tscn" id="4_b76gf"]
[ext_resource type="Script" path="res://scripts/camera/camera_controller.gd" id="5_dnnhi"]
[ext_resource type="Script" path="res://scripts/rooms/iter_condition.gd" id="5_hjeht"]
[ext_resource type="Script" path="res://scripts/camera/camera_mimic.gd" id="7_r2gvb"]
[ext_resource type="Script" path="res://scripts/camera/camera_transition_zone.gd" id="8_kcjao"]
[ext_resource type="Script" path="res://scripts/camera/main_menu_camera.gd" id="10_y18ac"]
[ext_resource type="Texture2D" uid="uid://cg3hs2nrhctne" path="res://assets/rooms/bedroom/Rose_Flowerpot-0002.png" id="13_7dyyi"]
[ext_resource type="Texture2D" uid="uid://dfuim35hydl0h" path="res://assets/rooms/bedroom/Table-0003.png" id="13_lm341"]
[ext_resource type="PackedScene" uid="uid://dgc32vat3ju3y" path="res://scenes/rooms/fifth_iteration_piano.tscn" id="14_i10t7"]
[ext_resource type="PackedScene" uid="uid://c18nue0taqkxl" path="res://scenes/rooms/sixth_iteration_piano.tscn" id="15_mn7ln"]
[ext_resource type="Texture2D" uid="uid://dxh5xef6a74sp" path="res://assets/rooms/bedroom/Safe_room-0001.png" id="17_h6be4"]
[ext_resource type="Texture2D" uid="uid://bxnhqeiqdhmd0" path="res://assets/rooms/bedroom/desk_lamp-0001.png" id="18_05nnf"]
[ext_resource type="Texture2D" uid="uid://cw2ngo5whn3af" path="res://assets/rooms/bedroom/Mirror_iter_4-0001.png" id="19_ajarl"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_33vgn"]
size = Vector2(1172, 326)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_17xfd"]
size = Vector2(1172, 122)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_6grpq"]
size = Vector2(187, 206)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_nhexv"]
size = Vector2(1151, 643)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ba18x"]
size = Vector2(197, 173)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ysu7m"]
size = Vector2(128, 56)

[node name="Bedroom" type="Node2D"]
script = ExtResource("1_22h2h")

[node name="ColorRect" type="ColorRect" parent="."]
z_index = -4096
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -2061.0
offset_top = -1631.0
offset_right = 2014.0
offset_bottom = 1865.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 0, 0, 1)

[node name="TextureRect" type="TextureRect" parent="."]
z_index = -4095
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -512.0
offset_top = -288.0
offset_right = 512.0
offset_bottom = 288.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("1_njdfq")

[node name="Boundaries" type="StaticBody2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Boundaries"]
position = Vector2(1, -171)
shape = SubResource("RectangleShape2D_33vgn")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="Boundaries"]
position = Vector2(0, 259)
shape = SubResource("RectangleShape2D_17xfd")

[node name="CollisionShape2D3" type="CollisionShape2D" parent="Boundaries"]
position = Vector2(-494, 94)
shape = SubResource("RectangleShape2D_6grpq")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Boundaries"]
polygon = PackedVector2Array(409, -8, 409, 5, 424, 5, 424, 45, 448, 45, 471, 45, 469, 103, 425, 103, 425, 146, 409, 146, 409, 198, 575, 198, 576, -8)

[node name="CollisionPolygon2D2" type="CollisionPolygon2D" parent="Boundaries"]
polygon = PackedVector2Array(-389, 27, -294, 27, -288, 27, -289, 69, -226, 69, -226, -8, -226, -26, -294, -26, -389, -26)

[node name="Camera2D" type="Camera2D" parent="."]
zoom = Vector2(2, 2)
editor_draw_limits = true
script = ExtResource("5_dnnhi")
follow_offset = Vector2(0, -35)
look_ahead_distance = 0.5

[node name="RoomTransitionRegion" parent="." instance=ExtResource("4_b76gf")]
scene_path = "res://scenes/rooms/hallway.tscn"

[node name="CollisionPolygon2D" parent="RoomTransitionRegion" index="0"]
polygon = PackedVector2Array(450, 51, 449, 99, 467, 99, 468, 51)

[node name="MainMenuCamera" type="Camera2D" parent="."]
visible = false
script = ExtResource("7_r2gvb")
transition_time = 0.0
transition_time_out = 2.0

[node name="CameraTransitionZone" type="Area2D" parent="MainMenuCamera"]
monitorable = false
script = ExtResource("8_kcjao")

[node name="CollisionShape2D" type="CollisionShape2D" parent="MainMenuCamera/CameraTransitionZone"]
position = Vector2(4.5, -4.5)
shape = SubResource("RectangleShape2D_nhexv")

[node name="MainMenuScript" type="Node2D" parent="MainMenuCamera/CameraTransitionZone"]
script = ExtResource("10_y18ac")

[node name="Iteration_Condition" type="Node" parent="MainMenuCamera"]
script = ExtResource("5_hjeht")
iter = 1
condition = 0

[node name="Camera_Mimic2" type="Camera2D" parent="."]
position = Vector2(395, 71)
zoom = Vector2(3.63, 3.63)
script = ExtResource("7_r2gvb")

[node name="CameraTransitionZone" type="Area2D" parent="Camera_Mimic2"]
monitorable = false
script = ExtResource("8_kcjao")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Camera_Mimic2/CameraTransitionZone"]
position = Vector2(12.5, 1.5)
shape = SubResource("RectangleShape2D_ba18x")

[node name="Camera_Mimic" type="Camera2D" parent="."]
position = Vector2(-235, -10)
zoom = Vector2(3.63, 3.63)
script = ExtResource("7_r2gvb")

[node name="CameraTransitionZone" type="Area2D" parent="Camera_Mimic"]
position = Vector2(-34, 0)
monitorable = false
script = ExtResource("8_kcjao")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Camera_Mimic/CameraTransitionZone"]
position = Vector2(12.5, 1.5)
shape = SubResource("RectangleShape2D_ba18x")

[node name="PlayerStartPos" type="Marker2D" parent="."]
position = Vector2(-222, 21)

[node name="PlayerEnterPos" type="Marker2D" parent="."]
position = Vector2(388, 73)

[node name="Furniture" type="Node2D" parent="."]

[node name="Bed-0001" type="Sprite2D" parent="Furniture"]
position = Vector2(-258, 5)
scale = Vector2(2, 2)
texture = ExtResource("2_iouxf")

[node name="Node" parent="Furniture/Bed-0001" instance=ExtResource("3_pmjfu")]
shadow_offset = Vector2(-2, 5)
static_shadow = true

[node name="BookCase-0001" type="Sprite2D" parent="Furniture"]
position = Vector2(-342, -37)
scale = Vector2(2, 2)
texture = ExtResource("3_j433k")

[node name="Node" parent="Furniture/BookCase-0001" instance=ExtResource("3_pmjfu")]
shadow_offset = Vector2(-2, 5)
static_shadow = true

[node name="FifthIterationPiano" parent="." instance=ExtResource("14_i10t7")]
visible = false

[node name="Iteration_Condition" type="Node" parent="FifthIterationPiano"]
script = ExtResource("5_hjeht")
iter = 5
condition = 0

[node name="SixthIterationPiano" parent="." instance=ExtResource("15_mn7ln")]
visible = false

[node name="Iteration_Condition" type="Node" parent="SixthIterationPiano"]
script = ExtResource("5_hjeht")
iter = 6

[node name="SecondIteration" type="Node2D" parent="."]
position = Vector2(473, -174)

[node name="StaticBody" type="StaticBody2D" parent="SecondIteration"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="SecondIteration/StaticBody"]
position = Vector2(-292, 175)
shape = SubResource("RectangleShape2D_ysu7m")
disabled = true

[node name="Table-0003" type="Sprite2D" parent="SecondIteration"]
position = Vector2(-355, 179)
scale = Vector2(2, 2)
texture = ExtResource("13_lm341")

[node name="RoseFlowerpot-0002" type="Sprite2D" parent="SecondIteration"]
position = Vector2(-327, 119)
scale = Vector2(2, 2)
texture = ExtResource("13_7dyyi")

[node name="Iteration_Condition" type="Node" parent="SecondIteration"]
script = ExtResource("5_hjeht")
iter = 2

[node name="ThirdIteration" type="Node2D" parent="."]
visible = false
position = Vector2(-20, 4)

[node name="Safe2" parent="ThirdIteration" instance=ExtResource("4_7o0in")]
position = Vector2(279, -24)

[node name="Iteration_Condition" type="Node" parent="ThirdIteration"]
script = ExtResource("5_hjeht")
iter = 3
condition = 0

[node name="FourthIteration" type="Node2D" parent="."]

[node name="Iteration_Condition" type="Node" parent="FourthIteration"]
script = ExtResource("5_hjeht")
iter = 4

[node name="SafeRoom-0001" type="Sprite2D" parent="FourthIteration"]
position = Vector2(259, -20)
texture = ExtResource("17_h6be4")

[node name="DeskLamp-0001" type="Sprite2D" parent="FourthIteration"]
position = Vector2(194, -27)
scale = Vector2(2, 2)
texture = ExtResource("18_05nnf")

[node name="MirrorIter4-0001" type="Sprite2D" parent="FourthIteration"]
position = Vector2(204, -67)
texture = ExtResource("19_ajarl")

[connection signal="on_transitioned_exited" from="MainMenuCamera/CameraTransitionZone" to="MainMenuCamera/CameraTransitionZone/MainMenuScript" method="_on_camera_transition_zone_on_transitioned_exited"]

[editable path="RoomTransitionRegion"]
